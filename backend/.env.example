# API Server configuration
API_HOST=0.0.0.0
API_PORT=8000

# CORS configuration - comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://yourapp.com

# OpenAI configuration
OPENAI_API_KEY=your_openai_api_key

# =============================================================================
# MODEL CONFIGURATION
# Configure different models for different purposes to optimize cost vs capability
# =============================================================================

# Main conversation model - used for chat responses, integration, and response rendering
# Recommendation: Use a capable model (gpt-4o, gpt-4-turbo) for best user experience
# Cost impact: High (most frequent usage)
DEFAULT_MODEL=gpt-4o-mini

# Router model - lightweight model for routing decisions (chat vs search vs analyzer)
# Recommendation: Use a fast, cheap model (gpt-4o-mini, gpt-3.5-turbo) since routing is simple classification
# Cost impact: Low (quick decisions only)
ROUTER_MODEL=gpt-4o-mini

# Research model - used for autonomous background research workflow
# Recommendation: Use a capable analytical model (gpt-4o, gpt-4-turbo) for thorough research
# Cost impact: Medium (background tasks, less frequent than chat)
RESEARCH_MODEL=gpt-4o-mini

# Topic extraction model - extracts research-worthy topics from conversations
# Recommendation: Use a structured output capable model (gpt-4o-mini works well)
# Cost impact: Low (structured output tasks)
TOPIC_EXTRACTION_MODEL=gpt-4o-mini

# =============================================================================
# EXTERNAL API CONFIGURATION
# =============================================================================

# Perplexity configuration for web search
PERPLEXITY_API_KEY=your_perplexity_api_key
# Perplexity model for web search - use 'sonar' for their default search model
PERPLEXITY_MODEL=sonar

# PubMed E-utilities configuration (no API key required, but email recommended)
# Email helps NCBI contact you if there are issues with your requests
PUBMED_EMAIL=your_email@example.com

# Zep Memory Configuration (optional)
ZEP_API_KEY=your_zep_api_key_here
ZEP_ENABLED=false

# Langchain configs
LANGCHAIN_TRACING_V2=True
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
LANGCHAIN_API_KEY=your_langchain_api_key
LANGCHAIN_PROJECT=researcher-prototype

# =============================================================================
# SYSTEM CONFIGURATION
# =============================================================================

# Logging configuration
# Available levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Message management configuration
MAX_MESSAGES_IN_STATE=4

# Topic extraction configuration
TOPIC_EXTRACTION_MODEL=gpt-4o-mini
TOPIC_MIN_CONFIDENCE=0.8
TOPIC_MAX_SUGGESTIONS=3
TOPIC_EXTRACTION_TEMPERATURE=0.3
TOPIC_EXTRACTION_MAX_TOKENS=800

# Research cycle interval (in seconds) for each enabled user
# Default: 1800 seconds = 30 minutes
# Range: 60-86400 (1 minute to 1 day)
AUTONOMY_INTERVAL_SECONDS=1800

# Research engine behavior
RESEARCH_QUALITY_THRESHOLD=0.6
RESEARCH_MAX_TOPICS_PER_USER=3
RESEARCH_FINDINGS_RETENTION_DAYS=30

# =============================================================================
# ACTIVE RESEARCH TOPICS LIMIT
# =============================================================================
# Maximum number of topics that can be actively researched simultaneously per user
# This limit applies to ALL topics (manual + autonomous expansions)
# When limit is reached:
# - User cannot manually activate more topics until some are deactivated
# - Autonomous expansion topics are created as INACTIVE (awaiting manual activation)
# Range: 1-50, Default: 10
MAX_ACTIVE_RESEARCH_TOPICS_PER_USER=5

# =============================================================================
# MOTIVATION SYSTEM CONFIGURATION
# =============================================================================
# Hierarchical motivation system that determines which topics to research
# when a research cycle runs (global drives + per-topic scoring)

# Global motivation parameters
MOTIVATION_THRESHOLD=5.0
MOTIVATION_BOREDOM_RATE=0.0002
MOTIVATION_CURIOSITY_DECAY=0.0001
MOTIVATION_TIREDNESS_DECAY=0.0001
MOTIVATION_SATISFACTION_DECAY=0.0001

# Per-topic motivation configuration
TOPIC_MOTIVATION_THRESHOLD=0.5
TOPIC_ENGAGEMENT_WEIGHT=0.3
TOPIC_QUALITY_WEIGHT=0.2
TOPIC_STALENESS_SCALE=0.0001

# =============================================================================
# TOPIC EXPANSION CONFIGURATION
# Configure the autonomous topic expansion system that discovers related research topics
# Requires Zep for candidate generation and validation
# =============================================================================

# LLM-based expansion configuration
EXPANSION_LLM_MODEL=gpt-4o-mini                      # LLM model for topic generation
EXPANSION_LLM_CONFIDENCE_THRESHOLD=0.6               # Min confidence for accepting topics (0.0-1.0)
EXPANSION_LLM_TIMEOUT_SECONDS=30                     # Timeout for LLM calls

# Expansion depth and breadth control (prevents topic explosion)
EXPANSION_MAX_DEPTH=2                                # Max depth for expansion chains (root=0, child=1, etc.)
EXPANSION_MAX_PARALLEL=2                             # Max concurrent expansion research tasks
EXPANSION_MAX_TOTAL_TOPICS_PER_USER=10               # Max total expansion topics per user
EXPANSION_MAX_UNREVIEWED_TOPICS=5                    # Max unreviewed topics before pausing expansion  
EXPANSION_REVIEW_ENGAGEMENT_THRESHOLD=0.2            # Engagement threshold that counts as "reviewed"

# Zep knowledge graph search configuration
ZEP_SEARCH_LIMIT=10
EXPANSION_MIN_SIMILARITY=0.35                        # Min similarity score for candidates (0.0-1.0)

# Admin Interface Configuration (CHANGE THESE IN PRODUCTION!)
ADMIN_PASSWORD=admin123
ADMIN_JWT_SECRET=your-secret-key-change-in-production
ADMIN_JWT_EXPIRE_MINUTES=480

# --- SMTP / Email Notifications ---
# Use an App Password (16 chars) for Gmail/Workspace. NOT your normal password.
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USE_SSL=false
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=

# Deep-link base URL used in emails to open results in the app
FRONTEND_URL=http://localhost:3000